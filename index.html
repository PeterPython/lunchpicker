<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lunch Decision</title>
    <script>
        let people = [];
        let chosenPerson = null;

        function updateDate() {
            const today = new Date();
            const options = { weekday: 'long' };
            document.getElementById("currentDate").innerText = today.toLocaleDateString(undefined, options);
        }

        function submitResponse() {
            const nameSelect = document.getElementById("name");
            const name = nameSelect.value;
            const inOffice = document.getElementById("inOffice").checked;
            
            if (name && inOffice) {
                people.push(name);
                updatePotentialSelectors();
            }
            
            if (name) {
                nameSelect.remove(nameSelect.selectedIndex);
            }
        }

        function updatePotentialSelectors() {
          const list = document.getElementById("potentialSelectors");
          list.innerHTML = "";

          if (people.length === 0) {
              list.style.color = "lightgray";
              list.style.fontStyle = "italic";
              list.innerHTML = "Names";
          } else {
              list.style.color = "black";
              list.style.fontStyle = "normal";
              people.forEach(person => {
                  const li = document.createElement("li");
                  li.textContent = person;
                  li.style.textAlign = "left";
                  list.appendChild(li);
              });
          }
      }


        function pickRandomPerson() {
            if (people.length > 0) {
                const randomIndex = Math.floor(Math.random() * people.length);
                chosenPerson = people[randomIndex];
                document.getElementById("chosenPerson").innerText = `${chosenPerson}`;
                document.getElementById("restaurantInput").style.display = "block";
            }
        }

        function submitRestaurant() {
            const restaurant = document.getElementById("restaurant").value;
            if (chosenPerson && restaurant) {
                document.getElementById("selectedRestaurant").innerText = `${chosenPerson} chose: ${restaurant}`;
            }
        }

        function clearAll() {
            people = [];
            chosenPerson = null;
            document.getElementById("potentialSelectors").innerHTML = "";
            document.getElementById("chosenPerson").innerText = "";
            document.getElementById("selectedRestaurant").innerText = "";
            document.getElementById("restaurantInput").style.display = "none";
            
            // Reset dropdown options
            const nameSelect = document.getElementById("name");
            nameSelect.innerHTML = `
                <option value="Alec">Alec</option>
                <option value="Chai">Chai</option>
                <option value="Cole">Cole</option>
                <option value="Denis">Denis</option>
                <option value="Hunter">Hunter</option>
                <option value="Pete">Pete</option>
            `;
        }
    </script>
</head>
<body onload="updateDate()">
    <h1 style="text-align: center;">Lunch Lottery</h1>
    <p style="text-align: center;" id="currentDate"></p>
    
    <h2>Will you be in the office today?</h2>
    <label for="name">Select your name:</label>
    <select id="name">
        <option value="Alec">Alec</option>
        <option value="Chai">Chai</option>
        <option value="Cole">Cole</option>
        <option value="Denis">Denis</option>
        <option value="Hunter">Hunter</option>
        <option value="Pete">Pete</option>
    </select>
    <label>
        <input type="radio" name="officeStatus" id="inOffice"> Yes
    </label>
    <label>
        <input type="radio" name="officeStatus" id="notInOffice"> No
    </label>
    <button onclick="submitResponse()">Submit</button>
    
    <h2>In office</h2>
    <ul id="potentialSelectors" style="color: lightgray; font-style: italic; list-style-type: none; padding: 0;">Names</ul>
    
    <h2>Restaurant selector</h2>
    <button onclick="pickRandomPerson()">Pick</button>
    <p id="chosenPerson"></p>
    
    <div id="restaurantInput" style="display: none;">
        <h2>Restaurant name</h2>
        <select id="restaurant" onchange="handleRestaurantSelection()">
            <option value="">Choose a restaurant</option>
            <option value="Pizza Place">Pizza Place</option>
            <option value="Sushi Spot">Sushi Spot</option>
            <option value="Burger Joint">Burger Joint</option>
            <option value="Choose New">Choose new restaurant</option>
        </select>
        <script>
            function handleRestaurantSelection() {
                const select = document.getElementById("restaurant");
                if (select.value === "Choose New") {
                    const newRestaurant = prompt("Enter the restaurant name:");
                    if (newRestaurant) {
                        const newOption = document.createElement("option");
                        newOption.value = newRestaurant;
                        newOption.textContent = newRestaurant;
                        select.insertBefore(newOption, select.lastElementChild);
                        select.value = newRestaurant;
                    } else {
                        select.value = "";
                    }
                }
            }
        </script>
        <button onclick="submitRestaurant()">Submit</button>
    </div>
    
    <h2>Lunch Decision</h2>
    <select id="restaurant" onchange="handleRestaurantSelection()">
        <option value="">Choose a restaurant</option>
        <option value="Pizza Place">Pizza Place</option>
        <option value="Sushi Spot">Sushi Spot</option>
        <option value="Burger Joint">Burger Joint</option>
        <option value="Choose New">Choose new restaurant</option>
    </select>
    <script>
        function handleRestaurantSelection() {
            const select = document.getElementById("restaurant");
            if (select.value === "Choose New") {
                const newRestaurant = prompt("Enter the restaurant name:");
                if (newRestaurant) {
                    const newOption = document.createElement("option");
                    newOption.value = newRestaurant;
                    newOption.textContent = newRestaurant;
                    select.insertBefore(newOption, select.lastElementChild);
                    select.value = newRestaurant;
                } else {
                    select.value = "";
                }
            }
        }
    </script>
    <p id="selectedRestaurant"></p>
    
    <button onclick="clearAll()">Clear</button>
</body>
</html>
